<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Guest profile</title>
    <link rel="stylesheet" href="../css/guestPage.css">
    <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="../css/popUp.css">
    <link rel="stylesheet" href="../css/styles.css">
    <script type="text/javascript">
    	var link = window.location.href.toString();
		const params = new URLSearchParams(window.location.search);
		var auth = "?auth=" + params.get('auth');

        function getProfileName() {
            $.ajax({
                url:
                    link.substring(0, 65) + "/info/" + link.substring(65, link.length),
                dataType: "json",
                success: function (r) {
                    $("#welcome").html(
                        "Welcome, " +
                        r["fullName"].substring(0, r["fullName"].indexOf(" ")) +
                        "!"
                    );
					
                    $("#guestID").html(r["guestID"]);
                    $("#name").html(r["fullName"]);
                    $("#idnum").html(
                        r["identificationType"] + " number: " + r["identificationNumber"]
                    );
                    $("#categoryName").html(r["categoryName"]);
                    $("#address").html(r["address"]);
                    $("#phone").html(
                        "home: " +
                        r["homePhoneNumber"] +
                        "<br>" +
                        "mobile: " +
                        r["mobilePhoneNumber"]
                    );
                },
            });
        }

        $(document).ready(function () {
            $('#book-management').on('click', function () {
                window.location.href = 'http://localhost:8080/HotelChainManagementSystem/services/book-management' + auth;
            })
            getProfileName();
            $("#breakAfterTable").html("<br>".repeat(24));

            $('#book').on('click', function () {
                    window.location.href = "http://localhost:8080/HotelChainManagementSystem/services/room-booking" +
                        auth;
                }
            );
        });
    </script>
</head>
<body>
<h2>
    <a href="http://localhost:8080/HotelChainManagementSystem/" id="home"
    >Hotel Chain Management System</a
    >
</h2>
<h3 id="welcome">Welcome, guest!</h3>
<div class="profile-info">
    <h4>Profile Information:</h4>

    <table id="info" align="left" border="1">
    	<tr>
            <th>Guest ID</th>
            <td id="guestID">null</td>
        </tr>
        <tr>
            <th>Name</th>
            <td id="name">null</td>
        </tr>
        <tr>
            <th>Idenfication Number</th>
            <td id="idnum">null</td>
        </tr>
        <tr>
            <th>Category</th>
            <td id="categoryName">null</td>
        </tr>
        <tr>
            <th>Address</th>
            <td id="address">null</td>
        </tr>
        <tr>
            <th>Phone Numbers</th>
            <td id="phone">null</td>
        </tr>
    </table>
</div>
<div id="breakAfterTable"></div>
<button onclick="window.location.href = 'http://localhost:8080/HotelChainManagementSystem'">Log out</button>&nbsp;
<button id="book">Book</button>&nbsp;
<button id="book-management">My Bookings</button>

<div id="popup1" class="overlay">
	<div class="popup">
		<h2>Advisories</h2>
		<a class="close" href="#">&times;</a>
		<div class="content">
		<p>The hotel "Regula" now have unbelievably generous discounts for rooms! Christmas season begins! Up to 25% discounts!</p>
		<p>The hotel "Exclusive" now have unbelievably bad marketing strategy! Christmas season has began but prices are becoming only bigger and bigger(</p>
		<p>The hotel "Luxury" declares a start of christmas season... I guess...</p>
		</div>
	</div>
</div>

</body>
</html>
